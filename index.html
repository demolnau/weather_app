<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
    <!-- Load icon library -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>
<!-- The form -->
<form class="example" action="#">
  <input type="text" id="search_text" placeholder="Search.." name="search">
  <button type="submit"><i class="fa fa-search"></i></button>
</form>
<div id="content">
    <p id="city"></p>
    <p id="region"></p>
    <p id="country"></p>
    <p id="lat/lon"></p>
    <div>
        <p id="temperature"></p>
    </div>

    <p id="last_updated"></p>
    <p id="condition"></p>
</div>


  <script>
    //let btn = document.querySelector('#cat_pics')
    //let cat_img = document.createElement('img');
    let search_btn = document.querySelector('button[type="submit"]')
    let searchTerms = document.getElementById("search_text")
    let content =document.getElementById("content")
    let searchImage = document.createElement("img")
    let city= document.getElementById("city")
    let region =document.getElementById("region")
    let country =document.getElementById("country")
    let latLon = document.getElementById("lat/lon")
    let temperature = document.getElementById("temperature")
    let last_updated =document.getElementById("last_updated")
    let condition = document.getElementById("condition")

    search_btn.onclick= function(){
        let searchThis = searchTerms.value
        //content.innerHTML = searchThis
        //content.innerHTML = searchTerms.value
        console.log(searchThis)
        fetch(`http://api.weatherapi.com/v1/current.json?key=3624a068aef7412f8f6204644232103&q=${searchThis}&aqi=no`, {mode: 'cors'})
            .then(function(response) {
                return response.json();
            })
            .then(function(response){
                console.log(response)
                console.log(response.location)
                city.innerHTML= response.location.name
                region.innerHTML = response.location.region
                country.innerHTML = response.location.country
                latLon.innerHTML= "Latitude: " + response.location.lat+ ", Longitutude: " + response.location.lon;
                temperature.innerHTML = "Temperature in F: " + response.current.temp_f + " Temperature in C: " + response.current.temp_c;
                last_updated.innerHTML = "Last updated: "+ response.current.last_updated;
                condition.innerHTML=response.current.condition.text
                searchImage.src = response.current.condition.icon
            })
            .catch((error) => {
                console.error("Error:", error);
            });   
            
        //console.log(`search: ${content.innerHTML}`)
        content.appendChild(city)
        content.appendChild(region)
        content.appendChild(country)
        content.appendChild(latLon)
        content.appendChild(last_updated)
        content.appendChild(temperature)
        content.appendChild(condition)
        document.body.appendChild(content)
        document.body.appendChild(searchImage)
        
    }
    

  </script>
</body>
</html>
